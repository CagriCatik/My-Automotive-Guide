# Service-orientierte Fahrzeugarchitektur - Grundlagen

Service-Oriented Architecture (SOA) ist ein architektonischer Ansatz für die Entwicklung von Softwareanwendungen, der auf dem Prinzip der Serviceorientierung basiert. Es stellt ein Paradigma dar, das es ermöglicht, Softwarefunktionen als unabhängige und wiederverwendbare Services zu organisieren. Diese Services sind eigenständige, autonome Einheiten, die spezifische Aufgaben erfüllen und über ein standardisiertes Kommunikationsprotokoll miteinander interagieren können. Jeder Service stellt dabei eine klar definierte Schnittstelle zur Verfügung, über die andere Services mit ihm kommunizieren können. Ein wesentlicher Vorteil von SOA liegt in der Fähigkeit, Services unabhängig voneinander zu entwickeln, bereitzustellen und zu aktualisieren. Dies ermöglicht eine hohe Flexibilität und Skalierbarkeit von Anwendungen, da Services je nach Bedarf hinzugefügt, entfernt oder aktualisiert werden können, ohne dass dies Auswirkungen auf andere Teile des Systems hat. Ein weiterer wichtiger Aspekt von SOA ist die lose Kopplung zwischen den Services. Durch die Verwendung von standardisierten Kommunikationsprotokollen können Services plattformübergreifend und unabhängig voneinander kommunizieren. Dadurch wird die Interoperabilität zwischen verschiedenen Systemen und Technologien ermöglicht. Darüber hinaus fördert SOA die Wiederverwendung von Softwarekomponenten. Services können in verschiedenen Anwendungen und Kontexten wiederverwendet werden, was zu einer effizienteren Entwicklung führt. Dies reduziert den Entwicklungs- und Wartungsaufwand und trägt zur Verbesserung der Gesamteffizienz von Softwareprojekten bei.

## Evolution der Mobilität: Auf dem Weg zum softwaregesteuerten Fahrzeug

Der moderne Kunde strebt nach einem Fahrzeug, das nicht nur funktionell ist, sondern auch als ein ansprechendes und personalisiertes Produkt wahrgenommen wird. Dabei liegt der Schlüssel in der Entwicklung nach dem Grundsatz des "kundenorientierten Designs", welcher betont, dass die Entwickler nicht identisch mit den Endnutzern sind. Das Ziel ist es, dem Kunden Features anzubieten, die ihn begeistern und sein Leben erleichtern. Ein herausragendes Beispiel hierfür sind die Features von Tesla, die Kunden begeistern. Bei Tesla hat der Kunde die Möglichkeit, das Verhalten seines Fahrzeugs nach seinen individuellen Vorlieben anzupassen und es sogar selbst zu "programmieren". Das Fahrzeug wird somit zu einem persönlichen Produkt, vergleichbar mit einem Smartphone, das maßgeschneiderte Lösungen und Anwendungen für den modernen Menschen bietet. Die Unternehmensmission zielt darauf ab, Luxus mit modernster Technologie zu verbinden und aufregende, kundenorientierte Funktionen anzubieten. Besonders das autonome Fahren eröffnet dem Kunden ein völlig neues Fahrerlebnis. Es geht darum, ein Fahrzeug nicht mehr nur als einfaches Fortbewegungsmittel zu betrachten, sondern als eine personalisierte Umgebung, in der der Kunde neue Funktionen und Features nach Bedarf konfigurieren und erleben kann. Die Zukunft der Mobilität gehört den Unternehmen, die Produkte entwickeln, die nahtlos in die digital vernetzten Lebensräume integriert werden können. Es wird angestrebt, neue Technologien und Infrastrukturen zu schaffen, um das Auto zu einem innovativen und transformative Produkt zu machen. Ziel ist es, ein digitales Ökosystem in ein Fahrzeug zu integrieren, wodurch Entwicklern die Möglichkeit gegeben wird, Funktionen bereitzustellen und zu nutzen, um dem Kunden flexible Features nach Bedarf anzubieten. Die entscheidende Frage stellt sich, wie es möglich ist, ein "Software-getriebenes Auto" zu entwickeln, das es erlaubt, neue Funktionen und Features während des Lebenszyklus flexibel anzupassen und bereitzustellen. Hierbei Der moderne Kunde strebt nach einem Fahrzeug, das nicht nur funktionell ist, sondern auch als ein ansprechendes und personalisiertes Produkt wahrgenommen wird. Dabei liegt der Schlüssel in der Entwicklung nach dem Grundsatz des "kundenorientierten Designs", welcher betont, dass die Entwickler nicht identisch mit den Endnutzern sind. Das Ziel ist es, dem Kunden Features anzubieten, die ihn begeistern und sein Leben erleichtern. Ein herausragendes Beispiel hierfür sind die Features von Tesla, die Kunden begeistern. Bei Tesla hat der Kunde die Möglichkeit, das Verhalten seines Fahrzeugs nach seinen individuellen Vorlieben anzupassen und es sogar selbst zu "programmieren". Das Fahrzeug wird somit zu einem persönlichen Produkt, vergleichbar mit einem Smartphone, das maßgeschneiderte Lösungen und Anwendungen für den modernen Menschen bietet. Die Unternehmensmission zielt darauf ab, Luxus mit modernster Technologie zu verbinden und aufregende, kundenorientierte Funktionen anzubieten. Besonders das autonome Fahren eröffnet dem Kunden ein völlig neues Fahrerlebnis. Es geht darum, ein Fahrzeug nicht mehr nur als einfaches Fortbewegungsmittel zu betrachten, sondern als eine personalisierte Umgebung, in der der Kunde neue Funktionen und Features nach Bedarf konfigurieren und erleben kann. Die Zukunft der Mobilität gehört den Unternehmen, die Produkte entwickeln, die nahtlos in die digital vernetzten Lebensräume integriert werden können. Es wird angestrebt, neue Technologien und Infrastrukturen zu schaffen, um das Auto zu einem innovativen und transformative Produkt zu machen. Ziel ist es, ein digitales Ökosystem in ein Fahrzeug zu integrieren, wodurch Entwicklern die Möglichkeit gegeben wird, Funktionen bereitzustellen und zu nutzen, um dem Kunden flexible Features nach Bedarf anzubieten. Die entscheidende Frage stellt sich, wie es möglich ist, ein "Software-getriebenes Auto" zu entwickeln, das es erlaubt, neue Funktionen und Features während des Lebenszyklus flexibel anzupassen und bereitzustellen. Hierbei ist ein neues Paradigma in der Fahrzeugvernetzung und E/E Architektur vonnöten. Eine service-orientierte Fahrzeugarchitektur, die die Integration von service-orientierter Kommunikation ins Fahrzeugnetzwerk ermöglicht, ist ein zentraler Baustein auf dem Weg zu diesem Ziel.

## Grundlagen der Service-orientierten Fahrzeugarchitektur

Die Serviceorientierte Architektur (SOA) hat ihren Ursprung in der Informationstechnologie und ist dort seit geraumer Zeit etabliert. Sie hat sich im Laufe der Jahre aus der Client/Server Kommunikation weiterentwickelt. Primär bedient sich SOA der Nutzung von Services zur Realisierung von Funktionen und gründet auf einem grundlegenden Kommunikationsprinzip von Anfrage und Antwort. Ein Service in diesem Kontext repräsentiert eine klar definierte Funktion. Er ist eigenständig und geschlossen
ausgestaltet und ist nicht von anderen Services oder ihrem Kontext abhängig. In der Informationstechnologieindustrie wird SOA als ein evolutionärer Schritt in der Softwarearchitektur betrachtet. Durch sie können IT-Organisationen effektiv die zunehmend komplexen Herausforderungen bewältigen. Eine Weiterentwicklung dieses Ansatzes manifestiert sich in den feingranularen Microservices Architekturen.

**Kernprinzipien der SOA lassen sich wie folgt zusammenfassen:**

- SOA basiert auf dem Prinzip der Client/Server Kommunikation, welches den Datenaustausch zwischen Server und Client(s) beinhaltet.
- Die SOA bedient sich bewährter Kommunikationsprinzipien, um ein Software System, sprich eine Softwarearchitektur, zu entwerfen.
- SOA stellt Services bereit, die entweder an Endnutzer, Anwender oder Applikationen übertragen werden, oder aber an andere Services in einem Netzwerk.
- In einem verteilten System erfolgt die Bereitstellung und Nutzung von Services über veröffentlichte Schnittstellen, die gut zugänglich und sorgfältig beschrieben sind, was ihre Nutzung erleichtert.

## Richtung einer neuen Welt in der Automobil-E/E-Architektur und Vernetzung

Die Einführung des neuen Paradigmas der Service-Orientierten Architektur (SOA) hat das bisher vorherrschende Prinzip der signalbasierten Kommunikation innerhalb des Fahrzeugs verändert. Statt die etablierte signalorientierte Fahrzeugkommunikation zu ersetzen, wird sie durch das Prinzip der service-orientierten Kommunikation weiterentwickelt und ergänzt. In der alten Welt der Fahrzeugkommunikation waren 1:1 Beziehungen zwischen den verschiedenen Komponenten üblich. Änderungen an Systemen oder die Einführung neuer Funktionen bedeuteten einen hohen Aufwand, da sie oft eine Anpassung der gesamten Kommunikationsstruktur erforderten. Im Gegensatz dazu bietet die SOA einen grundlegenden Paradigmenwechsel. Hierbei stehen generische Schnittstellen in Form von Service-Interfaces im Mittelpunkt. Mehrere Clients können diese Schnittstelle nutzen, um auf die Ressourcen des Fahrzeugs zuzugreifen und Funktionen umzusetzen. Dabei nimmt der Service Provider als Server eine zentrale Rolle als Architekturpattern der SOA ein. Diese neue Herangehensweise eröffnet eine flexiblere Gestaltung der Kommunikation im Fahrzeug. Sie ermöglicht es, Funktionen zu implementieren, ohne die gesamte Kommunikationsstruktur umfassend anpassen zu müssen. Dies führt zu einer höheren Agilität und erleichtert die Integration neuer Features in die bestehende Architektur. Die Evolution von der signalbasierten zur service-orientierten Kommunikation markiert einen bedeutenden Schritt in der Entwicklung der Fahrzeugvernetzung. Sie verspricht eine effizientere und adaptierbare Kommunikationsarchitektur, die den stetig steigenden Anforderungen an moderne Fahrzeuge gerecht wird.

## Aktuelle Netzwerkarchitektur

Die Fahrzeugkommunikation hat sich seit der Einführung der ersten CAN Busse im Fahrzeug stetig weiterentwickelt. Heutzutage basiert sie allgemein auf einem datenstromorientierten Prinzip, das sich auf die signalorientierte Kommunikation gründet. Diese Evolution hat zu einer hochkomplexen Netzwerkstruktur geführt, in der zahlreiche elektronische Steuergeräte (ECUs), Sensoren, Aktoren und Softwarekomponenten voneinander abhängig sind. Die heutige Fahrzeugvernetzung beruht auf spezifischen Signalen, die als Botschaften versendet werden, um eine bestimmte Funktion im Fahrzeug umzusetzen. Dieser Ansatz ermöglicht eine präzise Steuerung und Koordination der verschiedenen Komponenten im Fahrzeug, von der Antriebseinheit bis zur Karosserie. Die verschiedenen Domänen im Fahrzeug, wie beispielsweise der Antriebsstrang (Powertrain) und die Karosserie (Body), sind tief miteinander vernetzt und voneinander abhängig, um komplexe Funktionen im Fahrzeug zu realisieren. Diese enge Verknüpfung erfordert eine reibungslose Kommunikation zwischen den einzelnen Komponenten. Signale, die auf dem Subnetz, auf dem sie benötigt werden, nicht verfügbar sind, werden durch ein oder mehrere Gateways geroutet. Diese Gateways spielen eine entscheidende Rolle bei der Weiterleitung von Informationen und stellen sicher, dass die benötigten Signale an die richtigen Stellen gelangen. Die steigende Vernetzung im Fahrzeug hat zu einer hochkomplexen Netzwerkstruktur geführt, in der jedes von mehreren hundert vernetzten ECUs, Sensoren, Aktoren und Softwarekomponenten von einer Vielzahl anderer ECUs und Software abhängig ist. Diese Interdependenzen machen es äußerst herausfordernd, bestehende Signale oder gar die gesamte Netzwerkstruktur zu ändern, da eine solche Anpassung weitreichende Auswirkungen haben kann. Insgesamt zeigt die Entwicklung der Fahrzeugkommunikation einen klaren Trend von einer simplen, signalorientierten Kommunikation hin zu einer hochkomplexen, datenstromorientierten Netzwerkstruktur. Die Herausforderung liegt nun darin, diese komplexe Architektur effizient zu verwalten und anzupassen, um den stetig steigenden Anforderungen an moderne Fahrzeuge gerecht zu werden.

## Übergang zur Service-orientierten Architektur

Die Implementierung service-orientierter Kommunikation stellt eine bedeutende Herausforderung dar, insbesondere auf der physikalischen und hardwaretechnischen Ebene. Auf dieser Ebene wird bereits durch sogenannte "Central Controller", spezifisch High Performance ECUs als Domänenleitrechner, eine Form von service-orientierter Kommunikation repräsentiert. Diese Central Controller fungieren als zentrale Steuerungseinheiten, die eine hierarchische Netzwerkstruktur realisieren, indem sie die ECUs auf den Ethernet- Backbone bündeln. Es sei jedoch anzumerken, dass aus kommunikativer Perspektive das Element einer solchen Hierarchiestruktur in den gegenwärtigen Fahrzeugarchitekturen noch nicht implementiert ist. Die Gateways agieren lediglich als Vermittler, indem sie die Daten auf den Ethernet-Backbone routen. Folglich wird die Kommunikationslogik nach wie vor durch die traditionelle, signal-orientierte Methode geprägt, bei der jedes ECU Daten und Informationen direkt mit allen anderen ECUs austauscht. Um eine effektive service-orientierte Kommunikation im Fahrzeug zu etablieren, bedarf es daher einer entscheidenden Weiterentwicklung. Anstelle der bislang verwendeten Gateways, sprich den Central Controllern bzw. Domänenleitrechnern, bedarf es zusätzlich sogenannter Service Provider in jeder Domäne. Diese Service Provider fungieren als entscheidende Schnittstellen, die die Transformation von der bisherigen, signal-orientierten Kommunikationslogik hin zu einer service-orientierten Kommunikation ermöglichen. Hierdurch wird eine effiziente und zielgerichtete Kommunikation innerhalb des Fahrzeugsystems ermöglicht, was wiederum die Grundlage für weiterführende Entwicklungen in der Automobiltechnik schaffen könnte.

## Grundidee hinter der Service-orientierten Fahrzeugarchitektur

Die Service-Orientierte Fahrzeugarchitektur (SOA) zielt darauf ab, die Kommunikation innerhalb eines Fahrzeugs zu optimieren und zu vereinfachen. Ein zentraler Ansatz hierbei ist die Entkopplung der Onboard Fahrzeugkommunikation auf dem Ethernet Backbone von der Kommunikation auf den Subnetzwerken in den verschiedenen Domänen. Dieser Schritt reduziert die Komplexität der Vernetzung erheblich und ermöglicht individuelle Entwicklungszyklen auf unterschiedlichen Architekturleveln. Ein weiterer grundlegender Aspekt besteht in der Hierarchisierung, Abstraktion und Entkopplung von Fahrzeugfunktionen. Diese Maßnahmen tragen dazu bei, die Interdependenzen zwischen verschiedenen Funktionen zu minimieren und somit die Entwicklung und Wartung von Softwarekomponenten effizienter zu gestalten.

Die zugrunde liegende Idee besteht darin, die Kommunikation auf generischen Signalen anstelle von spezifischen Signalen zu basieren. Dies schafft eine flexible Architektur, die es ermöglicht, unterschiedliche Generationen von Komponenten innerhalb der Domänen miteinander zu kombinieren. Es ist wichtig anzumerken, dass die Zukunft der E/E Architekturen im Fahrzeug hybride Softwarearchitekturen sein werden. Dabei liegt der Fokus auf service-orientierter Kommunikation, wo immer dies möglich ist. In Fällen, in denen die Anwendung von SOA nicht möglich ist, beispielsweise aufgrund spezifischer Anforderungen wie Sicherheit, rechtlicher Restriktionen und anderen Anforderungen, wird auf signal-basierte Kommunikation zurückgegriffen. Diese hybride Herangehensweise gewährleistet eine ausgewogene und effektive Kommunikation im gesamten Fahrzeugsystem.

## Service Provider

Ein Service Provider in der Kontext von Fahrzeugarchitekturen bezieht sich auf eine Softwarekomponente, die die Bereitstellung von SOME/IP-Diensten auf dem Fahrzeugbackbone, welcher über ein Ethernet-Netzwerk realisiert ist, übernimmt. Diese Service Provider sind auf dem zentralen Leitrechner der spezifischen Domäne lokalisiert und stellen ein essenzielles Designmuster für die Service-orientierte Architektur von Fahrzeugen im Rahmen des Mercedes-Benz Operating Systems (MBOS) dar. Die Hauptaufgaben eines Service Providers umfassen die Umwandlung von signalbasierten Kommunikationsprotokollen in service-orientierte Kommunikation. Dies geschieht durch Abstraktion und Aggregation der internen Kommunikation in der jeweiligen Domäne, wodurch hochwertige Informationsinhalte generiert werden. Diese Generierung von Mehrwertinformationen basiert auf der Interpretation von Rohdaten. Darüber hinaus koordiniert der Service Provider den Zugriff auf seine unterliegenden Systemressourcen, indem er eingehende Anfragen priorisiert und verwaltet. Ein exemplarisches Beispiel hierfür ist die Möglichkeit, Client- Anfragen nach Dringlichkeit zu priorisieren. Das Vorhandensein eines Service Providers als zentrales Schlüsselmuster in der Service-orientierten Fahrzeugarchitektur von MBOS ist unverzichtbar, wenn eine Funktion mindestens eine Kommunikationsschnittstelle auf der Onboard Vehicle API bereitstellt. Diese Schnittstelle ermöglicht die Interaktion und den Datenaustausch zwischen verschiedenen Komponenten und Systemen innerhalb des Fahrzeugs.

## Anwendungsfälle für die Service-orientierte Fahrzeugarchitektur

Mit zunehmender Anzahl an ECUs, Sensoren, Aktoren und Softwarekomponenten in einem Fahrzeug steigt die
Komplexität und Schwierigkeit, neue Funktionen zu implementieren, ohne Auswirkungen auf alle anderen
Komponenten zu haben. Doch wir streben danach, neue Funktionen und Features ins Fahrzeug zu integrieren, um
ein optimales Kundenerlebnis zu bieten.
Aus diesem Grund ist die Entwicklung einer flexiblen und anpassungsfähigen Softwarearchitektur für Fahrzeuge
von großer Bedeutung. Diese Architektur soll im Fahrzeug Services bereitstellen, um Daten leicht abrufbar und
verwendbar zu machen. Das bedeutet, dass ein Client nicht mehr mit der Interpretation von Daten belastet ist,
sondern bereits aggregierte Daten einfach nutzen kann.
Es gibt konkrete Use Cases, die verdeutlichen, warum die Etablierung einer service-orientierten
Fahrzeugarchitektur von entscheidender Bedeutung ist:

1. Flexibles Steuern von Fahrzeugfunktionen: Aktuell werden mechatronische Funktionen über spezifische Request-Signale angesteuert, die von bekannten Clients kommen. Jeder Client hat sein eigenes spezifisches Request-Signal, was bedeutet, dass für jeden neuen Client eine neue Signaldefinition erstellt werden muss. Zudem müssen Sender und Empfänger angepasst werden, was insbesondere bei vielen Beteiligten sehr aufwendig ist. Durch SOA können diese Client-spezifischen Signale durch generische Signale ersetzt werden, die von mehreren Clients genutzt werden können. Dies ermöglicht eine n:1 Kommunikation, was die Fahrzeugvernetzung deutlich flexibler macht.

2. Verteilung von (bereits verarbeiteten) Daten im Fahrzeugnetzwerk: Ein Fahrzeug generiert während der Fahrt eine Vielzahl von Daten, wie beispielsweise Geschwindigkeit und Außentemperatur. Diese Daten werden aktuell oft als Rohsignale zwischen den Funktionen verschickt. Die Empfänger müssen die Daten selbstständig einsammeln und interpretieren. In einer Service-Orientierten Fahrzeugarchitektur übernimmt ein dedizierter Server diese Aufgabe. Er interpretiert die Daten, generiert Mehrwert und stellt die aggregierten Daten bereit, was zu einem
deutlichen Mehrwert im Fahrzeugnetzwerk führt. Die Service-Orientierte Architektur (SOA) hat ihren Ursprung in der IT und ist dort seit vielen Jahren fest etabliert. Sie hat sich aus der Client/Server-Kommunikation über mehrere Stufen hinweg entwickelt. Im Zentrum von SOA stehen Services, die primär zur Realisierung von Funktionen verwendet werden. Die Kommunikation erfolgt generell nach dem Prinzip von Anfrage und Antwort (Request-Response). Ein Service in der SOA ist eine klar definierte Funktion. Er ist eigenständig und geschlossen, das heißt, er operiert unabhängig von anderen Services oder dem Kontext, in dem er aufgerufen wird. Anders gesagt, ein Service hängt nicht vom Zustand anderer Services ab. In der IT-Industrie wird SOA als evolutionärer Schritt in der Softwarearchitektur angesehen. Sie ermöglicht es ITOrganisationen, mit den zunehmend komplexen Herausforderungen umzugehen, denen sie gegenüberstehen. Diese Entwicklung führt sogar zu noch feiner granularen Microservices-Architekturen, die die Flexibilität und Skalierbarkeit von Anwendungen weiter verbessern.

**Kernprinzipien der Service-Orientierten Architektur (SOA):**

1. Client/Server Kommunikation: SOA basiert auf dem Prinzip der Kommunikation zwischen einem Server und einem oder mehreren Clients. Hierbei findet ein Datenaustausch statt, bei dem der Server Services bereitstellt und die Clients diese Services nutzen.
2. Nutzung bewährter Kommunikationsprinzipien: SOA nutzt etablierte Kommunikationsprinzipien, um die Architektur eines Software-Systems zu gestalten. Dabei werden bewährte Methoden und Technologien aus der IT-Branche angewendet.
3. Bereitstellung von Services: SOA stellt Services bereit, die entweder direkt an Endnutzer, Anwendungen oder Applikationen zur Verfügung gestellt werden können. Alternativ können Services auch von anderen Services in einem Netzwerk genutzt werden.
4. Verwendung von Schnittstellen: In einem verteilten System, wie es bei SOA typisch ist, erfolgt die Bereitstellung und Nutzung von Services über definierte Schnittstellen. Diese Schnittstellen müssen zugänglich, gut beschrieben und daher leicht nutzbar sein. Dadurch wird eine reibungslose Interaktion zwischen den beteiligten Komponenten ermöglicht. Diese Kernprinzipien bilden die Grundlage für die Implementierung und Nutzung der Service-Orientierten Architektur. Sie ermöglichen eine flexible, skalierbare und effiziente Gestaltung von Software-Systemen in verschiedenen Anwendungsbereichen.

## Zielbild einer serviceorientierten Fahrzeugarchitektur

In unserer angestrebten Service-Orientierten Fahrzeugarchitektur (SOA) nehmen sowohl service-orientierte Kommunikation auf dem Ethernet als auch signalbasierte Kommunikation auf mechatronischer Ebene eine zentrale Rolle ein. Diese hybride SOA-Architektur ermöglicht eine effiziente Vernetzung von Fahrzeugfunktionen und -Daten, wobei eine entscheidende Abstraktionsschicht durch die Onboard Vehicle API geschaffen wird. Die Onboard Vehicle API fungiert als eine standardisierte Schnittstelle, die den Zugang zu verschiedenen Fahrzeugfunktionen und -Daten über sorgfältig konzipierte Services erleichtert. Es ist von besonderer Bedeutung zu beachten, dass die Onboard Vehicle API ausschließlich im Ethernet-Backbone existiert. Dies resultiert aus der Tatsache, dass SOME/IP eine Technologie des Ethernet-Stacks ist und dementsprechend auf dieser Infrastruktur basiert.

![1712352656692](image/README/1712352656692.png)

Dennoch wird durch die Funktionsarchitektur und die entscheidende Rolle der Service Provider ein innovatives Konzept in unserer Architektur umgesetzt. Mithilfe des Schlüsselelements der Service Providers ist es möglich, Services mit einer Schnittstelle auf der Onboard Vehicle API auch für Systeme und Funktionen bereitzustellen, die auf LIN/CAN oder FlexRay Steuergeräten lokalisiert sind. Dieses Konzept bildet das zentrale Design unserer Architektur. Unser vorrangiges Ziel ist es, SOME/IP Services mit einer Schnittstelle auf der Onboard Vehicle API für eine möglichst breite Palette von Systemen und Funktionen verfügbar zu machen. Mit anderen Worten, wir streben danach, Services zu entwerfen und zu implementieren, wo immer dies technisch realisierbar ist. Diese Herangehensweise ist entscheidend für die Schaffung einer flexiblen und service-orientierten Fahrzeugarchitektur, die den Anforderungen an Vernetzung, Datenaustausch und Funktionalität in modernen Fahrzeugen gerecht wird. Sie ermöglicht eine nahtlose Integration und Kommunikation von Systemen auf verschiedenen Ebenen der Fahrzeugarchitektur und trägt somit zur Realisierung innovativer und zukunftsfähiger Fahrzeugkonzepte bei.

## Onboard-Vehicle-API

Die Onboard Vehicle API stellt eine bedeutende Schnittstelle dar, die hochwertigen Inhalt sowohl technisch als auch funktional bereitstellt. Diese Schnittstellen bieten standardisierten Zugriff auf Fahrzeugfunktionen und -daten von hoher Qualität. Die API fungiert als eine Abstraktionsschicht, die die signalorientierte Kommunikation auf der mechatronischen Ebene von der serviceorientierten Kommunikation auf den Integrations-ECUs entkoppelt. Die Onboard Vehicle API kann als die Gesamtheit aller SOME/IP-Service-Schnittstellen definiert werden, die hochwertige Inhalte liefern. Dies bezieht sich auf Mehrwertinformationen in Form von interpretierten Daten, die vom Service Provider aus Rohsignalen verarbeitet und bereitgestellt werden. Diese Mehrwertinformationen werden über die Onboard Vehicle API als abstrahierende Services bereitgestellt. Diese Services können dann von verschiedenen Clients genutzt werden, um spezifische Anwendungsfälle im Fahrzeug umzusetzen. Die Onboard Vehicle API schafft somit einen standardisierten Zugang zu Fahrzeugfunktionen und -daten, wobei sie die herkömmliche signalbasierte Kommunikation auf der mechatronischen Ebene (wie LIN, CAN und FlexRay) von der serviceorientierten Kommunikation über Ethernet-Integrationssteuergeräte entkoppelt.

## SOME/IP

Die service-orientierte Kommunikation über SOME/IP stellt einen essenziellen Aspekt im Bereich der Fahrzeugkommunikation dar. Diese Middleware ermöglicht die effiziente Übermittlung von Daten zwischen einem Service Provider (Server) und den anfragenden Clients, die Fahrzeugressourcen nutzen möchten. Im Kontext der Fahrzeugkommunikation ist es von grundlegender Bedeutung, den Datenfluss zwischen diesen Entitäten zu regeln, um eine reibungslose Interaktion sicherzustellen. Die Notwendigkeit einer standardisierten Schnittstelle für den Datenaustausch ergibt sich aus den besonderen Anforderungen, die in der Automobilindustrie an Kommunikationssysteme gestellt werden. Im Allgemeinen werden Schnittstellen in der IT über etablierte Protokolle wie HTTP, RESTful oder SOAP beschrieben. Allerdings stoßen diese Standards im Kontext von Fahrzeugkommunikation an ihre Grenzen, da sie den speziellen Anforderungen von Embedded Systems in Fahrzeugen nicht gerecht werden können. Die derzeit dominierende Technologie zur Beschreibung der Client/Server-Kommunikation im Automobilsektor ist SOME/IP. Diese Technologie ist kompatibel mit der Standardsoftware-Welt von AUTOSAR Classic und Adaptive, was ihre Relevanz und weitverbreitete Anwendung im Bereich der Fahrzeugkommunikation unterstreicht. SOME/IP bietet eine standardisierte Lösung, um Daten zwischen Fahrzeugkomponenten auszutauschen, wobei es speziell auf die Anforderungen und Gegebenheiten im Automobilbereich abgestimmt ist.

Ein weiterer wichtiger Aspekt ist die Notwendigkeit, qualitativ hochwertige Schnittstellen bereitzustellen, die generisch nutzbar und wiederverwendbar sind. Dies gewährleistet, dass mehrere Clients auf dieselben Schnittstellen zugreifen können, um unterschiedliche Funktionen im Fahrzeug umzusetzen. Um dieses Ziel zu erreichen, müssen diese Schnittstellen sorgfältig standardisiert und umfassend dokumentiert werden. Eine solche Standardisierung und Dokumentation ist unerlässlich, um eine effiziente und reibungslose Kommunikation in komplexen Fahrzeugsystemen zu gewährleisten und die Entwicklung von Anwendungen im Automobilbereich zu erleichtern. Insgesamt spielt die service-orientierte Kommunikation über SOME/IP eine entscheidende Rolle in der Modernisierung und Verbesserung der Fahrzeugkommunikationstechnologie, indem sie den Bedarf an speziell angepassten Schnittstellen und Middleware-Lösungen deckt.


## Allgemeines architektonisches Muster für serviceorientierte Kommunikation

Das generelle Architekturpattern für service-orientierte Kommunikation, insbesondere im Kontext des Datenaustauschs zwischen einem Service Provider (Server) und den Clients, basiert auf dem Prinzip des Methodenaufrufs und der asynchronen Kommunikation. Im Folgenden wird erläutert, wie ein solcher Methodenaufruf für die Anfrage einer Fahrzeugresource abläuft: Initiierung des Methodenaufrufs: Der Prozess beginnt damit, dass ein Client, der auf eine bestimmte Ressource im Fahrzeug zugreifen möchte, die Initiatorrolle einnimmt. Der Client sendet eine Method Call Protocol Data Unit (PDU) an den Server, der hier als Service Provider fungiert. Diese Method Call PDU enthält IN-Parameter oder Argumente, die vom Server benötigt werden, um die gewünschte Anfrage für den Zugriff auf die Ressource auszuführen. Ein Beispiel hierfür könnte die Methode "requestWindowPosition" sein, die spezifische Argumente erfordert, um die gewünschte Position des Fensters zu signalisieren. Diese Argumente werden als IN-Parameter in der Method Call PDU festgelegt. Antwort des Servers: Nachdem der Server die Methodenaufrufanfrage erhalten hat, führt er die angeforderte Aktion aus oder plant deren Ausführung. Anschließend sendet der Server eine Return Protocol Data Unit (PDU) an den anfragenden Client zurück. Diese Return-PDU enthält in der Regel Informationen, die das Ergebnis des Methodenaufrufs beschreiben und dem Client mitteilen, ob die angeforderte Aktion erfolgreich ausgeführt wurde.

Eine wichtige Neuerung im Rahmen der Service-orientierten Architektur (SOA) besteht darin, dass, wenn eine Änderung des Zustands einer Ressource von einem beliebigen Client angefordert wird, der Server zusätzlich zur einfachen Return-PDU ein sogenanntes State Event an alle Clients sendet, die sich auf den entsprechenden Service (Dienst) subscribed haben. Dieses State Event enthält Informationen über den neuen Zustand der Ressource, der sich aufgrund der durchgeführten Aktion geändert hat. Diese Mitteilung des neuen Ressourcenstatus an alle relevanten Clients ermöglicht eine koordinierte und konsistente Aktualisierung der Informationen über die Ressource in der gesamten Client-Community. Es ist wichtig anzumerken, dass die zugrundeliegende Kommunikationsprotokolltechnologie für OVAPI (Open Vehicle Application Programming Interface) das SOME/IP-Protokoll ist, das auf dem Ethernet-Stack basiert. Diese Technologie ermöglicht die effiziente und zuverlässige Kommunikation zwischen dem Service Provider (Server) und den Clients im Kontext der Fahrzeugdaten- und Ressourcennutzung.

## Ziele der serviceorientierten Architektur

Die Entwicklung einer service-orientierten Fahrzeugarchitektur verfolgt mehrere Ziele, von denen das Hauptziel die Entkopplung des Zugangs zu Fahrzeugressourcen über die Onboard Vehicle API als zentrale abstrahierende Schnittstelle im Fahrzeug ist. Diese Entkopplung wird mithilfe von Services realisiert, die über spezielle Client- Server-Schnittstellen, die Methodenaufrufe ermöglichen, einen generischen Zugang zu den Fahrzeugressourcen gewähren. Dabei bleibt die Fahrzeugressource selbst unverändert, sie kann jedoch je nach den Wünschen des Clients, der eine Anfrage stellt, unterschiedliche Zustände annehmen, um die gewünschten Funktionen zu erfüllen. Die Implementierung generischer Signale zur Steuerung und Nutzung von Fahrzeugressourcen stellt jedoch eine komplexe Aufgabe dar und birgt zahlreiche Herausforderungen. Zum Beispiel muss berücksichtigt werden, wie mit konkurrierenden Anfragen von mehreren Clients auf eine Ressource umgegangen wird. Um solche Fragen zu beantworten, beschäftigt sich die Forschung intensiv mit der Entwicklung von Design Patterns und Richtlinien für die SOA-Architektur und das Design der Onboard Vehicle API. Dies umfasst die Gestaltung der Schnittstellen für die Services der Onboard Vehicle API sowie die Auswahl geeigneter Technologien und Protokolle als Datenaustauschformat zwischen dem Service Provider und den anfragenden Clients, um die spezifischen Anforderungen im Bereich der Automobilindustrie zu erfüllen. Dabei ist eine sorgfältige Berücksichtigung von Sicherheit, Skalierbarkeit und Effizienz von entscheidender Bedeutung, um eine zuverlässige und leistungsfähige service-orientierte Fahrzeugarchitektur zu entwickeln.